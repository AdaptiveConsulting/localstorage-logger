var LimitedSizeQueue_1 = require('../queue/LimitedSizeQueue');
var LocalStorageLogger = (function () {
    function LocalStorageLogger(config, _nextLogger) {
        this._nextLogger = _nextLogger;
        this._queue = new LimitedSizeQueue_1.LimitedSizeQueue({
            keyPrefix: config.logName,
            maxSizeInBytes: config.maxLogSizeInBytes
        });
    }
    LocalStorageLogger.prototype.log = function (level, message) {
        try {
            var time = new Date();
            this._queue.enqueue({ level: level, message: message, time: time });
        }
        catch (error) {
            console.error('Failed to log to local storage.', error);
        }
        finally {
            this._nextLogger.log(level, message);
        }
    };
    return LocalStorageLogger;
})();
exports.LocalStorageLogger = LocalStorageLogger;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2dlcnMvTG9jYWxTdG9yYWdlTG9nZ2VyLnRzIl0sIm5hbWVzIjpbIkxvY2FsU3RvcmFnZUxvZ2dlciIsIkxvY2FsU3RvcmFnZUxvZ2dlci5jb25zdHJ1Y3RvciIsIkxvY2FsU3RvcmFnZUxvZ2dlci5sb2ciXSwibWFwcGluZ3MiOiJBQUlBLGlDQUErQiwyQkFBMkIsQ0FBQyxDQUFBO0FBRTNEO0lBR0VBLDRCQUFZQSxNQUF3Q0EsRUFBVUEsV0FBb0JBO1FBQXBCQyxnQkFBV0EsR0FBWEEsV0FBV0EsQ0FBU0E7UUFDaEZBLElBQUlBLENBQUNBLE1BQU1BLEdBQUdBLElBQUlBLG1DQUFnQkEsQ0FBWUE7WUFDNUNBLFNBQVNBLEVBQUVBLE1BQU1BLENBQUNBLE9BQU9BO1lBQ3pCQSxjQUFjQSxFQUFFQSxNQUFNQSxDQUFDQSxpQkFBaUJBO1NBQ3pDQSxDQUFDQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUVERCxnQ0FBR0EsR0FBSEEsVUFBSUEsS0FBZUEsRUFBRUEsT0FBZUE7UUFDbENFLElBQUlBLENBQUNBO1lBQ0hBLElBQU1BLElBQUlBLEdBQUdBLElBQUlBLElBQUlBLEVBQUVBLENBQUNBO1lBQ3hCQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxPQUFPQSxDQUFDQSxFQUFDQSxPQUFBQSxLQUFLQSxFQUFFQSxTQUFBQSxPQUFPQSxFQUFFQSxNQUFBQSxJQUFJQSxFQUFDQSxDQUFDQSxDQUFDQTtRQUM5Q0EsQ0FBRUE7UUFBQUEsS0FBS0EsQ0FBQ0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDZkEsT0FBT0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsaUNBQWlDQSxFQUFFQSxLQUFLQSxDQUFDQSxDQUFDQTtRQUMxREEsQ0FBQ0E7Z0JBQVNBLENBQUNBO1lBQ1RBLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLEdBQUdBLENBQUNBLEtBQUtBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBO1FBQ3ZDQSxDQUFDQTtJQUNIQSxDQUFDQTtJQUNIRix5QkFBQ0E7QUFBREEsQ0FwQkEsQUFvQkNBLElBQUE7QUFwQlksMEJBQWtCLHFCQW9COUIsQ0FBQSIsImZpbGUiOiJsb2dnZXJzL0xvY2FsU3RvcmFnZUxvZ2dlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SUxvY2FsU3RvcmFnZUxvZ2dlckNvbmZpZ3VyYXRpb259IGZyb20gJy4vSUxvY2FsU3RvcmFnZUxvZ2dlckNvbmZpZ3VyYXRpb24nO1xuaW1wb3J0IHtMb2dMZXZlbH0gZnJvbSAnLi9Mb2dMZXZlbCc7XG5pbXBvcnQge0lMb2dFbnRyeX0gZnJvbSAnLi9JTG9nRW50cnknO1xuaW1wb3J0IHtJTG9nZ2VyfSBmcm9tICcuL0lMb2dnZXInO1xuaW1wb3J0IHtMaW1pdGVkU2l6ZVF1ZXVlfSBmcm9tICcuLi9xdWV1ZS9MaW1pdGVkU2l6ZVF1ZXVlJztcblxuZXhwb3J0IGNsYXNzIExvY2FsU3RvcmFnZUxvZ2dlciBpbXBsZW1lbnRzIElMb2dnZXIge1xuICBwcml2YXRlIF9xdWV1ZTogTGltaXRlZFNpemVRdWV1ZTxJTG9nRW50cnk+O1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogSUxvY2FsU3RvcmFnZUxvZ2dlckNvbmZpZ3VyYXRpb24sIHByaXZhdGUgX25leHRMb2dnZXI6IElMb2dnZXIpIHtcbiAgICB0aGlzLl9xdWV1ZSA9IG5ldyBMaW1pdGVkU2l6ZVF1ZXVlPElMb2dFbnRyeT4oe1xuICAgICAga2V5UHJlZml4OiBjb25maWcubG9nTmFtZSxcbiAgICAgIG1heFNpemVJbkJ5dGVzOiBjb25maWcubWF4TG9nU2l6ZUluQnl0ZXNcbiAgICB9KTtcbiAgfVxuXG4gIGxvZyhsZXZlbDogTG9nTGV2ZWwsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0aW1lID0gbmV3IERhdGUoKTtcbiAgICAgIHRoaXMuX3F1ZXVlLmVucXVldWUoe2xldmVsLCBtZXNzYWdlLCB0aW1lfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2cgdG8gbG9jYWwgc3RvcmFnZS4nLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuX25leHRMb2dnZXIubG9nKGxldmVsLCBtZXNzYWdlKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
